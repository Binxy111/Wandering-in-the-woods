<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Switch Puzzle Game</title>
<style>
  body, html { margin: 0; padding: 0; overflow: hidden; background: #111; }
  canvas { display: block; background: #222; }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const ball = { x: 50, y: 50, r: 20, color: 'lime', vx: 0, vy: 0 };
const target = { x: canvas.width - 100, y: canvas.height - 100, r: 25, color: 'gold' };

// Walls (x, y, width, height)
const walls = [
  {x: 200, y: 0, w: 20, h: 300},
  {x: 400, y: 200, w: 20, h: 300},
  {x: 600, y: 0, w: 20, h: 400},
];

const sensitivity = 0.2;

// Accelerometer control
window.addEventListener('deviceorientation', e => {
  ball.vx = e.gamma * sensitivity;
  ball.vy = e.beta * sensitivity;
});

function rectsIntersect(r1, r2) {
  return !(r2.x > r1.x + r1.w || 
           r2.x + r2.w < r1.x || 
           r2.y > r1.y + r1.h ||
           r2.y + r2.h < r1.y);
}

function update() {
  ball.x += ball.vx;
  ball.y += ball.vy;

  // Boundaries
  if(ball.x < ball.r) ball.x = ball.r;
  if(ball.x > canvas.width - ball.r) ball.x = canvas.width - ball.r;
  if(ball.y < ball.r) ball.y = ball.r;
  if(ball.y > canvas.height - ball.r) ball.y = canvas.height - ball.r;

  // Collision with walls
  walls.forEach(w => {
    if(ball.x + ball.r > w.x && ball.x - ball.r < w.x + w.w &&
       ball.y + ball.r > w.y && ball.y - ball.r < w.y + w.h) {
      // Simple collision: stop movement
      ball.x -= ball.vx;
      ball.y -= ball.vy;
      ball.vx = 0;
      ball.vy = 0;
    }
  });

  // Check win
  const dx = ball.x - target.x;
  const dy = ball.y - target.y;
  if(Math.sqrt(dx*dx + dy*dy) < ball.r + target.r){
    alert("You reached the target!");
    // Reset
    ball.x = 50;
    ball.y = 50;
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // Draw walls
  ctx.fillStyle = 'red';
  walls.forEach(w => ctx.fillRect(w.x, w.y, w.w, w.h));

  // Draw target
  ctx.beginPath();
  ctx.arc(target.x, target.y, target.r, 0, Math.PI*2);
  ctx.fillStyle = target.color;
  ctx.fill();

  // Draw ball
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2);
  ctx.fillStyle = ball.color;
  ctx.fill();
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
